demonstrative AI integrated news sentiment analysis API for thesis\
ignored files include `NewsUris.cs`, `launchSettings.json` and `appSettings.json` (w/ openai api key) and entire frontend in react

# flow and architecture
## _GET > api/dailydata_
`DailyDataService.cs`
one centralized endpoint for entire flow (designed for frontend app):

- scrapes predefined news RSS feeds from _today_ & parses into POCO (`NewsItem.cs`)
- calls openAI with predefined prompt (`Utils/Prompts.cs`) and concatenates parsed news data (title + description)
- extracts fields **Score** and **Reasoning** from AI response
- calls openAI with predefined prompt and concatenates reasoning from previous generation for _image generation_
- calculates avg score (10 days avg) and average status (up or down based on previous day avg) (like a stock ticker)
- creates corresponding rows in db tables (EF sqlite), adding **Date**, **Average Score**, **Average Status** and **Image URL**

## caching
- features admin endpoint for cache handling (delete key/delete db - removes latest entry) - important for manual monitoring because of unpredictable nature of AI
- when data endpoint called, checks for existing cache key key OR db entry from today

![image](https://github.com/user-attachments/assets/7a1666a7-ebe0-4d77-8b8a-ce0827c57f84)


## custom middleware
- apikey: simple hardcoded implementation, searches for "x-api-key" in header and matches
- errorhandling: logs and writes 501 to response when exceptions

# prompt design
_see `Utils/Prompts.cs` for full prompts (âˆ¼1000 words)_

## the analytical prompt
- defines 10 ranges (1-10, 10-20....)
- encourages utilitarianistic sentiment analysis
- uses examples to add accuracy (eg. score 100: apocalyptic event, score 1: war with major civilian impact ends)
- asks for consistency, low temperature and precision
- asks for short reasoning and exact response format (for backend parsing to work)
- attaches all scraped news **titles** and **descriptions**

**Should** generate two values:\
  SCORE\
  REASONING

## the image prompt
- inserts the reasoning generated by the **analytical prompt**
- asks for abstract picture depicting and juxtaposing the _negative_ events and the _positive_ events

**Should** generate url to the yin yang-like image

# demo
## news parsing
![datademo](https://github.com/user-attachments/assets/c7ff7add-294a-4ac1-925f-0a6779010d21)

## openai response
![openairesponse](https://github.com/user-attachments/assets/dc62a619-2cfb-4f29-9376-a7f505988d43)

## extraction
![extractiondemo](https://github.com/user-attachments/assets/4156ca5e-ee1b-470c-98d6-75d6ff41ef01)

## img generation
![imgdemo](https://github.com/user-attachments/assets/512f0149-97b0-4ae9-8748-ad93e65594d2)

## db
![dbdemo](https://github.com/user-attachments/assets/d4c4c264-b31d-4a72-93b3-4b3e0332c457)

![scoredemo](https://github.com/user-attachments/assets/967c7a71-f864-41c8-8266-282a2e416ff0)

## img
![expicture](https://github.com/user-attachments/assets/f235ea83-2be6-4a96-8080-0e829a805fe0)



